{"version":3,"sources":["tests/metric-test.js"],"names":["test","require","proxyquire","sinon","sandbox","db","uuidArgs","metricFixtures","config","logging","metricStub","singleMetric","Object","assign","single","newMetric","id","type","value","uuid","beforeEach","createSandbox","belongsTo","spy","findByAgentUuid","stub","withArgs","returns","Promise","resolve","findByTypeAgentUuid","serial","t","true","called"],"mappings":"AAAA;;AAEA,MAAMA,IAAI,GAAGC,OAAO,CAAC,KAAD,CAApB;;AACA,MAAMC,UAAU,GAAGD,OAAO,CAAC,YAAD,CAA1B;;AACA,MAAME,KAAK,GAAGF,OAAO,CAAC,OAAD,CAArB;;AAEA,IAAIG,OAAO,GAAG,IAAd;AACA,IAAIC,EAAE,GAAG,IAAT;AACA,IAAIC,QAAQ,GAAG,KAAf;;AAEA,MAAMC,cAAc,GAAGN,OAAO,CAAC,mBAAD,CAA9B;;AAEA,IAAIO,MAAM,GAAG;AACXC,EAAAA,OAAO,EAAE,YAAW,CAAE;AADX,CAAb;AAIA,IAAIC,UAAU,GAAG,IAAjB;AAEA,MAAMC,YAAY,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBN,cAAc,CAACO,MAAjC,CAArB;AAEA,MAAMC,SAAS,GAAG;AAChBC,EAAAA,EAAE,EAAE,EADY;AAEhBC,EAAAA,IAAI,EAAE,QAFU;AAGhBC,EAAAA,KAAK,EAAE,GAHS;AAIhBC,EAAAA,IAAI,EAAE;AAJU,CAAlB;AAOAnB,IAAI,CAACoB,UAAL,CAAgB,YAAY;AAC1BhB,EAAAA,OAAO,GAAGD,KAAK,CAACkB,aAAN,EAAV;AACAX,EAAAA,UAAU,GAAG;AACXY,IAAAA,SAAS,EAAEnB,KAAK,CAACoB,GAAN;AADA,GAAb;AAIAb,EAAAA,UAAU,CAACc,eAAX,GAA6BpB,OAAO,CAACqB,IAAR,EAA7B;AACAf,EAAAA,UAAU,CAACc,eAAX,CACGE,QADH,CACYpB,QADZ,EAEGqB,OAFH,CAEWC,OAAO,CAACC,OAAR,CAAgBtB,cAAc,CAACuB,mBAAf,CAAmCnB,YAAnC,CAAhB,CAFX;AAGD,CAVD;AAYAX,IAAI,CAAC+B,MAAL,CAAY,wBAAZ,EAAsC,MAAMC,CAAN,IAAW;AAC/CA,EAAAA,CAAC,CAACC,IAAF,CAAOvB,UAAU,CAACc,eAAX,CAA2BU,MAAlC,EAA0C,kCAA1C;AACD,CAFD","sourceRoot":"/Users/franndyabreu/Desktop/Platzi-Verse/platziverse-db","sourcesContent":["\"use strict\";\n\nconst test = require(\"ava\");\nconst proxyquire = require(\"proxyquire\");\nconst sinon = require(\"sinon\");\n\nlet sandbox = null;\nlet db = null;\nlet uuidArgs = \"xxx\";\n\nconst metricFixtures = require(\"./fixtures/metric\");\n\nlet config = {\n  logging: function() {}\n};\n\nlet metricStub = null;\n\nconst singleMetric = Object.assign({}, metricFixtures.single);\n\nconst newMetric = {\n  id: 30,\n  type: \"memory\",\n  value: 300,\n  uuid: \"TTT-TTT-TTT\"\n};\n\ntest.beforeEach(async () => {\n  sandbox = sinon.createSandbox();\n  metricStub = {\n    belongsTo: sinon.spy()\n  };\n\n  metricStub.findByAgentUuid = sandbox.stub();\n  metricStub.findByAgentUuid\n    .withArgs(uuidArgs)\n    .returns(Promise.resolve(metricFixtures.findByTypeAgentUuid(singleMetric)));\n});\n\ntest.serial(\"Metric#findByAgentUuid\", async t => {\n  t.true(metricStub.findByAgentUuid.called, \"FindByAgentUuid should be called\");\n});\n"]}